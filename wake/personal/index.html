<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Eplanet Thunderstriker | Civic Intelligence Archive</title>

  <!-- Core Aesthetic -->
  <style>
    body {
      margin: 0;
      font-family: "Segoe UI", system-ui, sans-serif;
      background: #0f1116;
      color: #eaeaea;
    }
    header {
      padding: 2rem;
      text-align: center;
      background: linear-gradient(90deg, #1c1f26, #17191f);
      border-bottom: 1px solid #333;
    }
    header h1 {
      margin: 0;
      font-size: 1.8rem;
      letter-spacing: 0.03em;
    }
    header p {
      opacity: 0.8;
      margin-top: 0.5rem;
    }
    main {
      max-width: 900px;
      margin: 2rem auto;
      padding: 0 1rem;
    }
    section.issue {
      border: 1px solid #333;
      border-radius: 12px;
      padding: 1.2rem 1.5rem;
      margin-bottom: 1.5rem;
      background: #14161c;
      transition: background 0.25s ease;
    }
    section.issue:hover {
      background: #1b1e26;
    }
    .title {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 0.4rem;
    }
    .summary {
      font-size: 0.95rem;
      line-height: 1.4rem;
      opacity: 0.9;
      margin-bottom: 0.5rem;
    }
    .updates li {
      font-size: 0.9rem;
      opacity: 0.8;
      margin-left: 1.2rem;
    }
  </style>

  <!-- Engines -->
  <script src="../assets/scripts/hookEngine.js"></script>
  <script src="../assets/scripts/archetypeEngine.js"></script>
  <script src="../assets/scripts/domEngine.js"></script>
  <script src="../assets/scripts/gestureEngine.js"></script>
  <script src="../assets/scripts/layoutEngine.js"></script>
  <script src="../assets/scripts/memoryEngine.js"></script>
  <script src="../assets/scripts/narrativeEngine.js"></script>
  <script src="../assets/scripts/stateEngine.js"></script>
  <script src="../assets/scripts/symbolEngine.js"></script>
</head>

<body>
  <header>
    <h1>Eplanet Thunderstriker â€” Civic Intelligence Archive</h1>
    <p>Autonomous EI-linked repository of verified civic data and analyses.</p>
  </header>

  <main id="content"></main>

  <script>
async function loadIndex() {
  const r = await fetch("./data/index.json");
  if (!r.ok) throw new Error("Missing /data/index.json");
  return r.json();
}

async function loadFile(file) {
  try {
    const r = await fetch(`./data/${file}`);
    return r.ok ? await r.json() : null;
  } catch {
    return null;
  }
}

async function render() {
  try {
    const index = await loadIndex();
    const dataset = (await Promise.all(index.map(loadFile))).filter(Boolean);
    const container = document.getElementById("content");
    container.innerHTML = "";
    dataset.forEach(d => {
      const sec = document.createElement("section");
      sec.className = "issue";
      sec.innerHTML = `
        <h2>${d.title}</h2>
        <p>${d.summary}</p>
        ${Array.isArray(d.updates)
          ? `<ul>${d.updates.map(u => `<li>${u.text || u}</li>`).join("")}</ul>`
          : ""}`;
      container.appendChild(sec);
    });
  } catch (err) {
    document.getElementById("content").textContent =
      "Error loading data: " + err.message;
  }
}

document.addEventListener("DOMContentLoaded", render);
</script>

</body>
</html>
