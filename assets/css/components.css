/* Components layer
   - Buttons, forms, cards, modals, etc.
   - Updated to reference final tokens (brand-default, brand-foreground, brand-hover, radius tokens, elevation, overlay, fs-*, fw-*, border-default).
*/

/* ------------------------
   Buttons
------------------------ */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5ch;
  padding: 0.5rem 1rem;
  border-radius: var(--radius-sm);
  font-size: var(--fs-base);
  font-weight: var(--fw-medium);
  line-height: 1;
  color: var(--brand-foreground);
  background: var(--brand-default);
  border: 1px solid transparent;
  text-decoration: none;
  cursor: pointer;
  transition: transform var(--dur-quick) var(--ease-standard), box-shadow var(--dur-medium) var(--ease-standard), background-color var(--dur-medium) var(--ease-standard);
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  padding-inline: 0.875rem;
}

/* Button native reset */
.btn:where(button, a) { -webkit-appearance: none; appearance: none; }

.btn:hover { transform: translateY(-1px); }
.btn:active { transform: translateY(0); }
.btn:focus-visible { box-shadow: var(--focus-outline); outline: none; }

.btn:disabled,
.btn[disabled] {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

/* Variants */
.btn-primary { background: var(--brand-default); color: var(--brand-foreground); border-color: transparent; }
.btn-primary:hover { background: var(--brand-hover); }

.btn-secondary {
  background: transparent;
  color: var(--text-default);
  border: 1px solid var(--border-default);
}
.btn-secondary:hover { background: rgba(15,23,34,0.02); }

.btn-outline {
  background: transparent;
  color: var(--brand-default);
  border: 1px solid var(--brand-default);
}
.btn-outline:hover { background: rgba(13,110,253,0.06); color: var(--brand-hover); }

.btn-ghost {
  background: transparent;
  color: var(--text-default);
  border: none;
}
.btn-ghost:hover { background: rgba(15,23,34,0.03); }

/* Sizes */
.btn-sm { padding: 0.25rem 0.6rem; font-size: var(--fs-sm); border-radius: calc(var(--radius-sm) - 2px); }
.btn-lg { padding: 0.75rem 1.25rem; font-size: var(--fs-lg); border-radius: var(--radius); }

/* Icon-only button */
.btn-icon {
  padding: 0.5rem;
  width: 2.5rem;
  height: 2.5rem;
  justify-content: center;
}

/* Block-level */
.btn-block { display: inline-flex; width: 100%; }

/* Loading / spinner state */
.btn[aria-busy="true"] { pointer-events: none; opacity: 0.85; }
.btn .spinner {
  width: 1em;
  height: 1em;
  border: 2px solid rgba(255,255,255,0.2);
  border-top-color: rgba(255,255,255,0.9);
  border-radius: 50%;
  animation: spin 800ms linear infinite;
}

/* Inherit color spinner for outline/secondary */
.btn-outline .spinner { border: 2px solid rgba(13,110,253,0.12); border-top-color: var(--brand-default); }
.btn-secondary .spinner { border: 2px solid rgba(0,0,0,0.06); border-top-color: var(--text-default); }

/* ------------------------
   Forms & Inputs
------------------------ */
.form-group { display: flex; flex-direction: column; gap: 0.375rem; margin-bottom: var(--space-4); }

.form-label { font-size: var(--fs-sm); color: var(--text-default); font-weight: var(--fw-medium); }

.form-control {
  display: inline-block;
  width: 100%;
  padding: var(--form-padding-y) var(--form-padding-x);
  font-size: var(--form-font-size);
  color: var(--text-default);
  background: var(--form-bg);
  border: var(--form-border);
  border-radius: var(--form-radius);
  transition: box-shadow var(--dur-medium) var(--ease-standard), border-color var(--dur-medium) var(--ease-standard);
  min-height: var(--control-min-h);
  line-height: 1.25;
  box-sizing: border-box;
}

/* Focus styles */
.form-control:focus {
  outline: none;
  box-shadow: var(--control-focus-shadow);
  border-color: var(--brand-default);
}

/* Disabled/read-only */
.form-control:disabled,
.form-control[readonly] {
  background: var(--form-disabled-bg);
  opacity: 0.9;
  cursor: not-allowed;
}

/* Textarea */
.form-control--textarea { min-height: 6rem; resize: vertical; }

/* Input groups */
.input-group { display: flex; gap: 0; align-items: stretch; }
.input-group > .form-control { border-radius: 0; }
.input-group > .input-addon {
  display: inline-flex;
  align-items: center;
  padding: 0 0.75rem;
  background: rgba(15,23,34,0.02);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-sm);
  font-size: var(--fs-base);
}

/* Checkboxes & radios (custom) */
.form-check {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
  user-select: none;
}
.form-check input[type="checkbox"],
.form-check input[type="radio"] {
  appearance: none;
  width: 1rem;
  height: 1rem;
  border-radius: 4px;
  border: 1px solid var(--border-default);
  display: inline-grid;
  place-items: center;
  margin: 0;
  background: transparent;
}
.form-check input[type="checkbox"]:checked {
  background: var(--brand-default);
  border-color: var(--brand-default);
  mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="white" d="M6 10.8L3.2 8 2 9.2 6 13.2 14 5.2 12.8 4z"/></svg>') center/60% no-repeat;
}
.form-check input[type="radio"] { border-radius: 9999px; }
.form-check input[type="radio"]:checked {
  background: var(--brand-default);
  border-color: var(--brand-default);
}

/* Helper text */
.form-help { font-size: var(--fs-sm); color: var(--text-muted); }

/* ------------------------
   Select, custom selects & toggles
------------------------ */
.select {
  position: relative;
}
.select .form-control {
  padding-right: 2.25rem;
}
.select::after {
  content: "";
  position: absolute;
  right: 0.75rem;
  top: 50%;
  transform: translateY(-50%) rotate(45deg);
  width: 0.6rem;
  height: 0.6rem;
  border-right: 2px solid var(--text-muted);
  border-bottom: 2px solid var(--text-muted);
  transform-origin: center;
  pointer-events: none;
}

/* ------------------------
   Cards (extended)
------------------------ */
.card {
  background: var(--bg-elevated);
  border-radius: var(--radius);
  box-shadow: var(--elevation-1);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.card-header {
  padding: var(--space-3) var(--space-4);
  border-bottom: 1px solid var(--border-default);
  background: transparent;
  font-weight: var(--fw-medium);
}
.card-body { padding: var(--space-4); flex: 1 1 auto; }
.card-footer {
  padding: var(--space-3) var(--space-4);
  border-top: 1px solid var(--border-default);
  background: transparent;
}

/* Variants */
.card--elevated { box-shadow: var(--elevation-2); }
.card--flat { box-shadow: none; border: 1px solid var(--border-default); }

/* ------------------------
   Badges, Tags & Pills
------------------------ */
.badge {
  display: inline-flex;
  align-items: center;
  gap: 0.35ch;
  padding: 0.2rem 0.5rem;
  font-size: var(--fs-sm);
  border-radius: var(--radius-lg);
  background: rgba(15,23,34,0.06);
  color: var(--text-default);
  font-weight: var(--fw-medium);
}
.badge--primary { background: var(--brand-default); color: var(--brand-foreground); }
.badge--muted { background: rgba(15,23,34,0.04); color: var(--text-muted); }

/* ------------------------
   Alerts
------------------------ */
.alert {
  display: flex;
  gap: var(--space-3);
  padding: var(--space-3);
  border-radius: var(--radius-sm);
  border: 1px solid transparent;
  background: rgba(15,23,34,0.03);
  color: var(--text-default);
}
.alert + .alert { margin-top: var(--space-3); }

.alert--success { background: rgba(25,135,84,0.06); border-color: rgba(25,135,84,0.08); color: var(--success-default); }
.alert--warning { background: rgba(255,193,7,0.06); border-color: rgba(255,193,7,0.08); color: var(--warning-default); }
.alert--danger  { background: rgba(220,53,69,0.06); border-color: rgba(220,53,69,0.08); color: var(--danger-default); }
.alert--info    { background: rgba(13,202,240,0.06); border-color: rgba(13,202,240,0.08); color: var(--info-default); }

/* Dismiss button for alerts */
.alert .close {
  margin-left: auto;
  background: transparent;
  border: none;
  cursor: pointer;
  color: inherit;
  font-size: 1.25rem;
}

/* ------------------------
   Navs & Tabs
------------------------ */
.nav {
  display: flex;
  gap: var(--space-3);
  align-items: center;
  list-style: none;
  padding: 0;
  margin: 0;
}
.nav .nav-item { display: inline-flex; }
.nav .nav-link {
  display: inline-flex;
  align-items: center;
  padding: 0.5rem 0.75rem;
  border-radius: var(--radius-sm);
  color: var(--text-default);
  text-decoration: none;
}
.nav .nav-link[aria-current="page"],
.nav .nav-link.active {
  background: rgba(15,23,34,0.03);
  font-weight: var(--fw-medium);
}

/* Tabs */
.tabs { border-bottom: 1px solid var(--border-default); }
.tabs .nav-link { border-bottom: 2px solid transparent; margin-bottom: -1px; }
.tabs .nav-link.active { border-bottom-color: var(--brand-default); }

/* ------------------------
   Dropdowns (basic)
------------------------ */
.dropdown { position: relative; display: inline-block; }
.dropdown-menu {
  position: absolute;
  min-width: 12rem;
  background: var(--bg-elevated);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-sm);
  box-shadow: var(--elevation-2);
  padding: var(--space-2) 0;
  margin-top: var(--space-2);
  z-index: 900;
  transform-origin: top left;
  opacity: 0;
  pointer-events: none;
  transform: translateY(-6px);
  transition: opacity var(--dur-medium) var(--ease-standard), transform var(--dur-medium) var(--ease-standard);
}
.dropdown.show > .dropdown-menu,
.dropdown:where([data-open="true"]) > .dropdown-menu {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0);
}
.dropdown-item {
  display: block;
  padding: 0.5rem 1rem;
  color: var(--text-default);
  text-decoration: none;
}
.dropdown-item:hover { background: rgba(15,23,34,0.03); }

/* ------------------------
   Tooltips (simple, CSS-only)
------------------------ */
.tooltip {
  position: relative;
  display: inline-block;
}
.tooltip .tooltip-tip {
  position: absolute;
  left: 50%;
  transform: translateX(-50%) translateY(-6px);
  bottom: 100%;
  background: rgba(15,23,34,0.92);
  color: #fff;
  padding: 0.35rem 0.5rem;
  border-radius: var(--radius-sm);
  font-size: var(--fs-sm);
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--dur-quick) var(--ease-standard), transform var(--dur-quick) var(--ease-standard);
  z-index: 1000;
}
.tooltip:hover .tooltip-tip,
.tooltip:focus-within .tooltip-tip,
.tooltip[data-open="true"] .tooltip-tip {
  opacity: 1;
  transform: translateX(-50%) translateY(-0.5rem);
}

/* ------------------------
   Modals
------------------------ */
.modal-backdrop {
  position: fixed;
  inset: 0;
  background: var(--overlay-60);
  display: none;
  z-index: 990;
  opacity: 0;
  transition: opacity var(--dur-medium) var(--ease-standard);
}
.modal-backdrop.show { display: block; opacity: 1; }

.modal {
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: var(--space-6);
}
.modal.show { display: flex; }
.modal-dialog {
  width: 100%;
  max-width: 56rem;
  background: var(--bg-elevated);
  border-radius: var(--radius);
  box-shadow: var(--elevation-3);
  overflow: hidden;
  transform: translateY(12px);
  opacity: 0;
  transition: transform var(--dur-medium) var(--ease-standard), opacity var(--dur-medium) var(--ease-standard);
}
.modal.show .modal-dialog { transform: translateY(0); opacity: 1; }

.modal-header, .modal-footer {
  padding: var(--space-3) var(--space-4);
  border-bottom: 1px solid var(--border-default);
  background: transparent;
}
.modal-footer { border-top: 1px solid var(--border-default); border-bottom: none; }
.modal-body { padding: var(--space-4); }

/* Close button */
.modal .close {
  background: transparent;
  border: none;
  font-size: 1.25rem;
  cursor: pointer;
}

/* ------------------------
   Toasts
------------------------ */
.toast-container {
  position: fixed;
  right: var(--space-4);
  bottom: var(--space-4);
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
  z-index: 1010;
}
.toast {
  min-width: 12rem;
  background: var(--bg-elevated);
  border: 1px solid var(--border-default);
  padding: var(--space-3);
  border-radius: var(--radius-sm);
  box-shadow: var(--elevation-2);
  opacity: 0;
  transform: translateY(6px);
  transition: opacity var(--dur-medium) var(--ease-standard), transform var(--dur-medium) var(--ease-standard);
}
.toast.show { opacity: 1; transform: translateY(0); }

/* ------------------------
   Progress & Skeletons
------------------------ */
.progress {
  height: 0.75rem;
  background: rgba(15,23,34,0.04);
  border-radius: var(--radius-sm);
  overflow: hidden;
}
.progress > .progress-bar {
  height: 100%;
  background: var(--brand-default);
  width: 0%;
  transition: width var(--dur-medium) var(--ease-decel);
}

/* Skeleton loader */
.skeleton {
  background: linear-gradient(90deg, rgba(15,23,34,0.04) 0%, rgba(15,23,34,0.06) 50%, rgba(15,23,34,0.04) 100%);
  background-size: 200% 100%;
  animation: shimmer 1.6s linear infinite;
  border-radius: var(--radius-sm);
}

/* ------------------------
   Avatar & media helpers
------------------------ */
.avatar {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  border-radius: 9999px;
  width: 2.5rem;
  height: 2.5rem;
  background: rgba(15,23,34,0.03);
  color: var(--text-default);
  font-weight: var(--fw-medium);
}
.avatar img { width: 100%; height: 100%; object-fit: cover; }

/* ------------------------
   Misc components
------------------------ */
.divider { height: 1px; background: var(--border-default); margin: var(--space-4) 0; border-radius: 1px; }

/* ------------------------
   Accessibility & motion preferences
------------------------ */
@media (prefers-reduced-motion: reduce) {
  .btn .spinner { animation: none; }
  .dropdown-menu,
  .modal-dialog,
  .toast,
  .progress > .progress-bar,
  .tooltip .tooltip-tip {
    transition: none !important;
  }
  .skeleton { animation: none; background: rgba(15,23,34,0.04); }
}

/* ------------------------
   Component helper keyframes (local only)
------------------------ */
@keyframes spin {
  to { transform: rotate(360deg); }
}
@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}