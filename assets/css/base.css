/* Base CSS reset and sensible defaults
   - Assumes tokens.css is loaded before this file (variables like --bg-default, --text-default, etc.)
   - Updated to consume final tokens (font-family, fs-base, lh-default, focus tokens, etc.)
*/

/* ===== Box model & core resets ===== */
*,
*::before,
*::after {
  box-sizing: border-box;
}

/* Remove default margins for common elements */
:where(html, body, h1, h2, h3, h4, h5, h6, p, figure, blockquote, dl, dd, ul, ol) {
  margin: 0;
}

/* Root font-size anchor (kept explicit for accessibility) */
html {
  font-size: 16px;
  -webkit-text-size-adjust: 100%;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: var(--bg-default);
  color: var(--text-default);
  height: 100%;
  box-sizing: border-box;
}

/* Set sensible defaults for the document */
body {
  min-height: 100vh;
  font-family: var(--font-family-sans);
  font-size: var(--fs-base);
  line-height: var(--lh-default);
  font-weight: var(--fw-regular);
  background-color: var(--bg-default);
  color: var(--text-default);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* ===== Typography scaffolding ===== */
h1, h2, h3, h4, h5, h6 {
  font-weight: var(--fw-medium);
  line-height: var(--lh-tight);
  color: inherit;
}

/* Paragraphs and lists */
p {
  margin: 0 0 var(--space-4) 0;
}

ul, ol {
  padding-left: 1.25rem;
  margin: 0 0 var(--space-4) 0;
}

/* Remove list styles when explicitly requested */
ul.list-unstyled,
ol.list-unstyled {
  list-style: none;
  padding: 0;
  margin: 0;
}

/* ===== Media & embedded content ===== */
img, picture, video, canvas, svg {
  display: block;
  max-width: 100%;
  height: auto;
}

/* Prevent images from stretching in flex containers */
img {
  object-fit: cover;
}

/* Tables */
table {
  width: 100%;
  border-collapse: collapse;
  border-spacing: 0;
}

/* ===== Form elements =====
   Keep form elements inheriting typography and color for easier styling.
*/
input, button, textarea, select {
  font: inherit;
  color: inherit;
  background: transparent;
  border: none;
  padding: 0;
  margin: 0;
  -webkit-font-smoothing: inherit;
  -moz-osx-font-smoothing: inherit;
}

/* Native button reset */
button {
  -webkit-appearance: none;
  appearance: none;
  cursor: pointer;
  background: transparent;
  border: none;
}

/* Disabled state */
:disabled,
[disabled] {
  cursor: not-allowed;
  opacity: 0.6;
}

/* ===== Links & focus styles ===== */
a {
  color: var(--brand-default);
  text-decoration: none;
  background-color: transparent;
  -webkit-tap-highlight-color: transparent;
}

/* Hover affordance (map to brand hover token) */
a:hover,
a:active {
  color: var(--brand-hover);
  text-decoration: underline;
}

/* Focus management */
:focus {
  outline: none;
}
:focus-visible {
  outline: var(--focus-outline);
  outline-offset: var(--focus-offset);
  border-radius: var(--radius-sm);
}

/* Keyboard-only focus helper for older browsers */
[data-focus-method="keyboard"] :focus {
  outline: var(--focus-outline);
  outline-offset: var(--focus-offset);
}

/* Selection color */
::selection {
  background: color-mix(in srgb, var(--brand-default) 70%, transparent);
  color: var(--brand-foreground);
}

/* ===== Utility helpers ===== */

/* Visually hidden (screen-reader only) */
.visually-hidden {
  position: absolute !important;
  height: 1px;
  width: 1px;
  overflow: hidden;
  clip: rect(1px, 1px, 1px, 1px);
  white-space: nowrap;
  border: 0;
  padding: 0;
  margin: -1px;
}

/* Clearfix helper */
.clearfix::after {
  content: "";
  display: table;
  clear: both;
}

/* Isolation helper for compositing contexts */
.isolate {
  isolation: isolate;
}

/* Full-bleed container helper */
.full-bleed {
  width: 100vw;
  position: relative;
  left: 50%;
  right: 50%;
  margin-left: -50vw;
  margin-right: -50vw;
}

/* ===== Accessibility & motion preferences ===== */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation: none !important;
    transition: none !important;
    scroll-behavior: auto !important;
  }
}

/* ===== Print-friendly defaults ===== */
@media print {
  *,
  *::before,
  *::after {
    box-shadow: none !important;
    text-shadow: none !important;
  }
  a[href]:after {
    content: " (" attr(href) ")";
    font-size: 90%;
  }
  img {
    break-inside: avoid;
  }
}