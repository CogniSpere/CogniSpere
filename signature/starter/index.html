<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Signature Schema Hub</title>
<style>
  body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
          Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
          margin: 0; padding: 0; background: #fafafa; color: #222; }
  header { background: #0078d7; color: white; padding: 1rem; font-size: 1.4rem; }
  nav { background: #f0f0f0; padding: 0.5rem 1rem; display: flex; gap: 1rem; }
  nav button {
    background: transparent; border: none; padding: 0.5rem 1rem; font-size: 1rem;
    cursor: pointer; border-bottom: 2px solid transparent; transition: border-color 0.3s;
  }
  nav button.active { border-color: #0078d7; font-weight: bold; }
  main { padding: 1rem; max-width: 900px; margin: 0 auto; background: white; box-shadow: 0 0 6px #ccc; }
  pre { background: #eee; padding: 1rem; overflow-x: auto; white-space: pre-wrap; word-break: break-word; max-height: 400px; }
  section { display: none; }
  section.active { display: block; }
  h2 { margin-top: 0; }
  svg { max-width: 100%; height: auto; }
  /* Scrollbar for pre */
  pre::-webkit-scrollbar { height: 8px; }
  pre::-webkit-scrollbar-track { background: #f0f0f0; }
  pre::-webkit-scrollbar-thumb { background: #0078d7; border-radius: 4px; }
</style>
</head>
<body>

<header>Signature Schema Hub</header>
<nav>
  <button class="tab-btn active" data-target="schema">Schema JSON</button>
  <button class="tab-btn" data-target="vocab">Vocab Index</button>
  <button class="tab-btn" data-target="changelog">Changelog</button>
  <button class="tab-btn" data-target="readme">README</button>
  <button class="tab-btn" data-target="viewer">Signature Index Viewer</button>
  <button class="tab-btn" data-target="diagram">Schema Diagram</button>
</nav>

<main>
  <section id="schema" class="active">
    <h2>Signature Schema (signatureComponents.v1.json)</h2>
    <pre id="schemaContent"></pre>
  </section>

  <section id="vocab">
    <h2>Vocab Index (vocab-index.json)</h2>
    <pre id="vocabContent"></pre>
  </section>

  <section id="changelog">
    <h2>Changelog (changelog.md)</h2>
    <pre id="changelogContent"></pre>
  </section>

  <section id="readme">
    <h2>README.md</h2>
    <pre id="readmeContent"></pre>
  </section>

  <section id="viewer">
    <h2>Signature Index Viewer</h2>
    <input placeholder="Search key or component..." oninput="search(this.value)" style="padding:0.5rem; width: 80%; margin-bottom: 1rem;"/>
    <pre id="viewerOutput">{ loading... }</pre>
  </section>

  <section id="diagram">
    <h2>Schema Diagram</h2>
    <svg viewBox="0 0 800 250" aria-label="Signature schema diagram" role="img" xmlns="http://www.w3.org/2000/svg" style="border:1px solid #ddd; background:#fff;">
      <!-- Main signature box -->
      <rect x="20" y="100" width="140" height="60" fill="#0078d7" rx="8" ry="8" />
      <text x="90" y="135" font-size="18" fill="white" text-anchor="middle" font-weight="bold">Signature</text>

      <!-- Components -->
      <rect x="200" y="20" width="180" height="60" fill="#4caf50" rx="8" ry="8" />
      <text x="290" y="50" font-size="14" fill="white" text-anchor="middle" font-weight="bold">Authenticity</text>
      <text x="290" y="70" font-size="12" fill="white" text-anchor="middle">signedBy, hash, method</text>

      <rect x="200" y="100" width="180" height="60" fill="#f39c12" rx="8" ry="8" />
      <text x="290" y="135" font-size="14" fill="white" text-anchor="middle" font-weight="bold">Confidence</text>
      <text x="290" y="155" font-size="12" fill="white" text-anchor="middle">level, margin</text>

      <rect x="200" y="180" width="180" height="60" fill="#9b59b6" rx="8" ry="8" />
      <text x="290" y="215" font-size="14" fill="white" text-anchor="middle" font-weight="bold">Context</text>
      <text x="290" y="235" font-size="12" fill="white" text-anchor="middle">origin, runtime, timestamp</text>

      <rect x="420" y="100" width="180" height="60" fill="#e74c3c" rx="8" ry="8" />
      <text x="510" y="135" font-size="14" fill="white" text-anchor="middle" font-weight="bold">Trace</text>
      <text x="510" y="155" font-size="12" fill="white" text-anchor="middle">sourceChain, ops</text>

      <!-- Lines -->
      <line x1="160" y1="130" x2="200" y2="50" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
      <line x1="160" y1="130" x2="200" y2="130" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
      <line x1="160" y1="130" x2="420" y2="130" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
      <line x1="160" y1="130" x2="200" y2="210" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

      <defs>
        <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto" markerUnits="strokeWidth">
          <path d="M0,0 L10,5 L0,10 L3,5 z" fill="#333" />
        </marker>
      </defs>
    </svg>
    <p style="margin-top: 1rem; font-size: 0.9rem; color:#555;">Diagram of Signature and core component relations</p>
  </section>
</main>

<script>
  const tabs = document.querySelectorAll('nav button.tab-btn');
  const sections = document.querySelectorAll('main section');

  tabs.forEach(btn => {
    btn.addEventListener('click', () => {
      tabs.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      const target = btn.dataset.target;
      sections.forEach(s => s.id === target ? s.classList.add('active') : s.classList.remove('active'));
    });
  });

  // Load large content as strings here (these match your files):

  const schemaJSON = `{
  "@context": "https://signature.ai/context/v1",
  "version": "1.0.0",
  "signatureModes": ["reflective", "forensic", "structural", "communicative"],
  "components": [
    {
      "id": "sig:modality",
      "label": "Modality",
      "category": "inherent",
      "description": "The representational form of the content",
      "types": ["text", "image", "audio", "video", "code", "multi-modal"]
    },
    {
      "id": "sig:reasoningHeuristic",
      "label": "Reasoning Heuristic",
      "category": "cognitive",
      "description": "Primary reasoning approach or generative method",
      "types": ["deduction", "analogy", "synthesis", "pattern-matching", "heuristic"]
    },
    {
      "id": "sig:confidenceModeling",
      "label": "Confidence Modeling",
      "category": "generative",
      "description": "Self-reported or inferred confidence signal",
      "types": ["low", "medium", "high", "mixed", "unknown"]
    },
    {
      "id": "sig:sourceAttribution",
      "label": "Source Attribution",
      "category": "relational",
      "description": "How sources or references are indicated",
      "types": ["none", "explicit", "implicit", "mixed", "traced"]
    },
    {
      "id": "sig:intentDeclaration",
      "label": "Intent Declaration",
      "category": "communicative",
      "description": "Declared purpose or orientation of the content",
      "types": ["informative", "persuasive", "exploratory", "performative", "ambiguous"]
    }
  ],
  "extensions": [],
  "validation": {
    "requiredFields": ["id", "label", "category", "description", "types"],
    "allowedCategories": ["inherent", "contextual", "relational", "cognitive", "generative", "communicative"]
  },
  "localization": {
    "defaultLanguage": "en",
    "translations": {
      "sig:modality": {
        "es": "Modalidad",
        "zh": "模态",
        "de": "Modalität"
      }
    }
  },
  "mappings": {
    "sig:modality": {
      "schema.org": "contentType",
      "dcterms": "format"
    }
  }
}`;

  const vocabJSON = `{
  "authenticity": ["verified", "claim", "source"],
  "confidence": ["score", "range", "model"],
  "context": ["location", "event", "entity"],
  "trace": ["id", "source", "relationship"],
  "ethics": ["alignment", "impact", "intent"]
}`;

  const changelogMD = `# Change Log

## [v1.0.0] – 2025-07-28
- Initial release of the modular EI signature schema.
- Includes CLI emitter, validator, and browser viewer.
- Added support for core \`authenticity\`, \`context\`, \`confidence\`, and \`trace\` components.

## [v1.0.1] – *(planned)*
- Add ethical tagging layer.
- Introduce vocabulary index for auto-labeling.
`;

  const readmeMD = `# Signature Schema Starter Kit

This repository contains a modular signature schema and tools for creating, validating, and viewing signature metadata.

## Included
- \`schema/\`: JSON signature definition
- \`tools/\`: Emitter and validator
- \`examples/\`: Sample output
- \`docs/\`: Usage and integration notes

## License
MIT or open by default — up to you to specify.
`;

  // Load content to pre blocks
  document.getElementById('schemaContent').textContent = schemaJSON;
  document.getElementById('vocabContent').textContent = vocabJSON;
  document.getElementById('changelogContent').textContent = changelogMD;
  document.getElementById('readmeContent').textContent = readmeMD;

  // Signature Index Viewer functionality
  const viewerIndex = {
    authenticity: { desc: "Verification and claims metadata" },
    confidence: { desc: "Scoring and ambiguity bounds" },
    context: { desc: "Environmental and situational info" },
    trace: { desc: "Source and data trail" },
    ethics: { desc: "Alignment, intent, and impact (ext)" }
  };

  function search(term) {
    term = term.toLowerCase();
    const results = Object.entries(viewerIndex)
      .filter(([k]) => k.includes(term))
      .reduce((acc, [k,v]) => { acc[k] = v; return acc; }, {});
    const out = Object.keys(results).length === 0 ? "No matches found." : JSON.stringify(results, null, 2);
    document.getElementById('viewerOutput').textContent = out;
  }
  search('');

</script>

</body>
</html>
